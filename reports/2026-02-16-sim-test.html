<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QA Report ‚Äî 2026-02-16 ‚Äî DispatchApp Sim Test</title>
    <link rel="stylesheet" href="../styles/main.css">
    <style>
        .status-pass { color: #3fb950; }
        .status-fail { color: #f85149; }
        .status-warn { color: #d29922; }
        .status-pending { color: #8b949e; }
        .stat-bar { display: flex; gap: 1.5rem; padding: 1rem; background: #161b22; border-radius: 8px; border: 1px solid #30363d; margin: 1rem 0; flex-wrap: wrap; }
        .stat-item { text-align: center; }
        .stat-num { font-size: 2rem; font-weight: 700; }
        .stat-label { font-size: 0.75rem; color: #8b949e; text-transform: uppercase; letter-spacing: 0.05em; }
        .screenshot-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1rem; margin: 1rem 0; }
        .screenshot-card { background: #161b22; border: 1px solid #30363d; border-radius: 8px; overflow: hidden; }
        .screenshot-card img { width: 100%; height: auto; cursor: pointer; transition: transform 0.2s; }
        .screenshot-card img:hover { transform: scale(1.02); }
        .screenshot-card .caption { padding: 0.75rem; font-size: 0.85rem; color: #8b949e; }
        .check-item { display: flex; align-items: center; gap: 0.5rem; padding: 0.25rem 0; }
        .check-icon { font-size: 1.1rem; }
        details { margin: 0.5rem 0; }
        details summary { cursor: pointer; padding: 0.75rem; background: #161b22; border: 1px solid #30363d; border-radius: 6px; font-weight: 600; }
        details[open] summary { border-radius: 6px 6px 0 0; }
        details .detail-content { padding: 1rem; background: #0d1117; border: 1px solid #30363d; border-top: none; border-radius: 0 0 6px 6px; }
        pre.accessibility-dump { background: #161b22; padding: 1rem; border-radius: 6px; overflow-x: auto; font-size: 0.8rem; line-height: 1.5; color: #8b949e; max-height: 400px; overflow-y: auto; }
        .badge { display: inline-block; padding: 0.15rem 0.5rem; border-radius: 999px; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; }
        .badge-critical { background: #f8514922; color: #f85149; }
        .badge-medium { background: #d2992222; color: #d29922; }
        .badge-low { background: #3fb95022; color: #3fb950; }
        .badge-info { background: #58a6ff22; color: #58a6ff; }
        .bug-item { padding: 0.75rem; margin: 0.5rem 0; background: #161b22; border-left: 3px solid; border-radius: 0 6px 6px 0; }
        .bug-critical { border-color: #f85149; }
        .bug-medium { border-color: #d29922; }
        .bug-low { border-color: #3fb950; }
        .header-meta { display: flex; gap: 2rem; flex-wrap: wrap; color: #8b949e; font-size: 0.85rem; margin: 1rem 0; }
        .header-meta span { display: flex; align-items: center; gap: 0.35rem; }
        .lightbox { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; justify-content: center; align-items: center; cursor: pointer; }
        .lightbox.active { display: flex; }
        .lightbox img { max-width: 90vw; max-height: 90vh; border-radius: 8px; }
        h1 { margin-bottom: 0.25rem; }
        .back-link { color: #58a6ff; text-decoration: none; font-size: 0.85rem; }
        .back-link:hover { text-decoration: underline; }
    </style>
</head>
<body style="max-width: 900px; margin: 0 auto; padding: 1.5rem; background: #0d1117; color: #e6edf3; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;">

    <a href="../" class="back-link">‚Üê Back to Dashboard</a>

    <h1>DispatchApp ‚Äî Simulator QA Report</h1>
    <p style="color: #8b949e; margin-top: 0;">Full pilot build test on iOS Simulator</p>

    <div class="header-meta">
        <span>üìÖ Feb 16, 2026 ‚Äî 7:43 PM ET</span>
        <span>üì± iPhone 17 Pro (Simulator)</span>
        <span>üåø ship/critical ‚Üí main</span>
        <span>üì¶ com.dispatch-app.app</span>
        <span>ü§ñ Mentat + ATL automation</span>
    </div>

    <div class="stat-bar">
        <div class="stat-item"><div class="stat-num status-pass">5</div><div class="stat-label">Passed</div></div>
        <div class="stat-item"><div class="stat-num status-warn">2</div><div class="stat-label">Warnings</div></div>
        <div class="stat-item"><div class="stat-num status-fail">0</div><div class="stat-label">Failed</div></div>
        <div class="stat-item"><div class="stat-num status-pending">4</div><div class="stat-label">Not Tested</div></div>
    </div>

    <h2>üì∏ Screenshots</h2>
    <div class="screenshot-grid">
        <div class="screenshot-card">
            <img src="../assets/2026-02-16-v2/login.png" alt="Login Screen" onclick="openLightbox(this)">
            <div class="caption">Login Screen ‚Äî Google OAuth, email sign-in, Try Demo</div>
        </div>
        <div class="screenshot-card">
            <img src="../assets/2026-02-16-v2/map_demo.png" alt="Map with Demo Data" onclick="openLightbox(this)">
            <div class="caption">Map View ‚Äî 12 listings (orange) + 15 contacts (blue) with clustering</div>
        </div>
        <div class="screenshot-card">
            <img src="../assets/2026-02-16-v2/menu.png" alt="Menu Half-Sheet" onclick="openLightbox(this)">
            <div class="caption">Menu ‚Äî Listings (12), Tasks (10), Notifications, Contacts (15), Settings</div>
        </div>
        <div class="screenshot-card">
            <img src="../assets/2026-02-16-v2/map_full.png" alt="Map Full View" onclick="openLightbox(this)">
            <div class="caption">Map zoomed ‚Äî individual pins visible with labels</div>
        </div>
    </div>

    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
        <img id="lightbox-img" src="" alt="Zoomed screenshot">
    </div>

    <h2>‚úÖ Test Results</h2>

    <details open>
        <summary>Login / Demo Mode</summary>
        <div class="detail-content">
            <div class="check-item"><span class="check-icon">‚úÖ</span> Login screen renders with branding (building icon, "Dispatch", "Real estate, streamlined")</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> "Continue with Google" button present</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> "Sign in with email" toggle present</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> <strong>"Try Demo" button found and works</strong></div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> Demo mode loads successfully ‚Äî transitions to map view</div>
            <div class="check-item"><span class="check-icon">‚ö†Ô∏è</span> Contacts permission dialog appears on first launch (expected iOS behavior)</div>
        </div>
    </details>

    <details open>
        <summary>Map View (Home)</summary>
        <div class="detail-content">
            <div class="check-item"><span class="check-icon">‚úÖ</span> Full-screen MapKit map renders</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> <strong>12 listing pins</strong> visible (orange circles with cluster counts)</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> <strong>15 contact pins</strong> visible (blue circles) ‚Äî buyers, sellers, prospects</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> Pin clustering works ‚Äî shows "+1 more", "+3 more" counts</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> Pin labels show: address + city + price (listings) or name + role (contacts)</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> "How can I help?" input bar at bottom</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> ‚ûï Add button (top-left of input bar)</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> üé§ Voice memo button</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> ‚â° Menu button (hamburger)</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> Map centered on GTA area (Hamilton, Burlington, Oakville, Mississauga)</div>
            <p style="margin-top: 0.75rem; color: #8b949e;">
                <strong>Accessibility note:</strong> All 12 listings and 15 contacts are properly labeled in the accessibility tree with full address/name/price/role data. Excellent VoiceOver support.
            </p>
        </div>
    </details>

    <details open>
        <summary>Menu Navigation</summary>
        <div class="detail-content">
            <div class="check-item"><span class="check-icon">‚úÖ</span> Menu opens as half-sheet (glass material, iOS 26 style)</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> "Done" button to dismiss</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> <strong>Listings</strong> ‚Äî building.2 icon, badge: 12</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> <strong>Tasks</strong> ‚Äî checklist icon, badge: 10</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> <strong>Notifications</strong> ‚Äî bell icon, no badge</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> <strong>Contacts</strong> ‚Äî person.2 icon, badge: 15</div>
            <div class="check-item"><span class="check-icon">‚úÖ</span> <strong>Settings</strong> ‚Äî gearshape icon</div>
            <p style="margin-top: 0.75rem; color: #8b949e;">Menu map is visible behind the sheet ‚Äî correct use of <code>.presentationBackgroundInteraction(.enabled)</code>.</p>
        </div>
    </details>

    <details>
        <summary>Listings <span class="badge badge-info">NOT TESTED</span></summary>
        <div class="detail-content">
            <p>ATL server crashed before navigating into Listings. However, accessibility data confirms 12 demo listings are loaded with correct data:</p>
            <ul style="color: #8b949e;">
                <li>381 Maple Street, Oakville ‚Äî active</li>
                <li>23 Oak Avenue, Burlington ‚Äî $1,005,000</li>
                <li>276 Cedar Drive, Milton ‚Äî $1,060,000</li>
                <li>250 Pine Lane, Georgetown ‚Äî $845,000</li>
                <li>267 Elm Court, Waterloo ‚Äî $895,000</li>
                <li>490 Birch Crescent, Kitchener ‚Äî $615,000</li>
                <li>422 Willow Boulevard, Cambridge ‚Äî $530,000</li>
                <li>397 Spruce Way, Guelph ‚Äî $915,000</li>
                <li>442 Walnut Place, Hamilton ‚Äî $565,000</li>
                <li>55 Poplar Circle, Markham ‚Äî $840,000</li>
                <li>52 Ash Terrace, Brampton ‚Äî $1,030,000</li>
                <li>315 Cherry Road, Mississauga ‚Äî $1,090,000</li>
            </ul>
        </div>
    </details>

    <details>
        <summary>Tasks <span class="badge badge-info">NOT TESTED</span></summary>
        <div class="detail-content"><p>ATL crashed before navigating into Tasks view. Badge count (10) confirmed from menu.</p></div>
    </details>

    <details>
        <summary>Contacts <span class="badge badge-info">NOT TESTED</span></summary>
        <div class="detail-content">
            <p>ATL crashed before navigating into Contacts view. Badge count (15) confirmed from menu. All 15 contacts verified in map accessibility tree:</p>
            <ul style="color: #8b949e;">
                <li>Sarah Thompson ‚Äî Buyer</li>
                <li>Michael Rodriguez ‚Äî Seller</li>
                <li>Emma Chen ‚Äî Buyer</li>
                <li>James Patel ‚Äî Buyer</li>
                <li>Olivia Kim ‚Äî Seller</li>
                <li>David Nguyen ‚Äî Buyer</li>
                <li>Sophia Morrison ‚Äî Buyer</li>
                <li>Daniel Campbell ‚Äî Seller</li>
                <li>Ava Stewart ‚Äî Buyer</li>
                <li>Matthew Phillips ‚Äî Buyer</li>
                <li>Isabella Bennett ‚Äî Prospect</li>
                <li>Mia Murphy ‚Äî Prospect</li>
                <li>Charlotte Clark ‚Äî Prospect</li>
                <li>Andrew Collins ‚Äî Prospect</li>
                <li>Ryan Rivera ‚Äî Prospect</li>
            </ul>
        </div>
    </details>

    <details>
        <summary>Chat <span class="badge badge-info">NOT TESTED</span></summary>
        <div class="detail-content"><p>ATL crashed before opening chat. Input bar ("How can I help?") is visible on map and has proper text field type in accessibility tree.</p></div>
    </details>

    <details>
        <summary>Settings <span class="badge badge-info">NOT TESTED</span></summary>
        <div class="detail-content"><p>ATL crashed before navigating to Settings.</p></div>
    </details>

    <h2>üêõ Bugs & Issues</h2>

    <div class="bug-item bug-medium">
        <span class="badge badge-medium">MEDIUM</span>
        <strong> Chat text field missing accessibility label</strong>
        <p style="color: #8b949e; margin: 0.5rem 0 0 0;">The "How can I help?" text field has <code>label=None</code> in the accessibility tree. The placeholder text shows as <code>val=How can I help?</code> but there's no explicit label. This affects VoiceOver users and automation tools.</p>
    </div>

    <div class="bug-item bug-low">
        <span class="badge badge-low">LOW</span>
        <strong> ATL native server crashes on interaction</strong>
        <p style="color: #8b949e; margin: 0.5rem 0 0 0;">The ATL XCTest-based automation server crashes after 1-2 interactions with the app (especially when opening sheets or tapping buttons). This is an ATL limitation, not a DispatchApp bug, but it prevented full automated testing. Manual testing recommended for deeper screens.</p>
    </div>

    <h2>üìä Accessibility Data</h2>

    <details>
        <summary>Login Screen Accessibility Tree</summary>
        <div class="detail-content">
            <pre class="accessibility-dump">e10: type=image label=Business id=building.2.crop.circle
e11: type=staticText label=Dispatch
e12: type=staticText label=Real estate, streamlined
e13: type=button label=Continue with Google
e14: type=staticText label=or
e15: type=button label=Sign in with email
e16: type=button label=Try Demo
e17: type=image label=Globe id=globe
e18: type=staticText label=Continue with Google</pre>
        </div>
    </details>

    <details>
        <summary>Map View Accessibility Tree (92 elements)</summary>
        <div class="detail-content">
            <pre class="accessibility-dump">e10: type=other label=Property and contact map
e11: type=button label=Add id=plus
e12: type=textField val=How can I help?
e13: type=button label=Record voice memo id=waveform.circle.fill
e14: type=button label=Menu id=line.3.horizontal

--- Listing Pins ---
e17: label=276 Cedar Drive, Milton, $1,060,000
e18: label=52 Ash Terrace, Brampton, $1,030,000
e20: label=315 Cherry Road, Mississauga, $1,090,000
e24: label=397 Spruce Way, Guelph, $915,000
e27: label=490 Birch Crescent, Kitchener, $615,000
e28: label=267 Elm Court, Waterloo, $895,000
e29: label=422 Willow Boulevard, Cambridge, $530,000
e33: label=250 Pine Lane, Georgetown, $845,000
e34: label=442 Walnut Place, Hamilton, $565,000
e40: label=55 Poplar Circle, Markham, $840,000
e41: label=23 Oak Avenue, Burlington, $1,005,000
e43: label=381 Maple Street, Oakville, active

--- Contact Pins ---
e19: label=Sophia Morrison, Buyer
e21: label=Matthew Phillips, Buyer
e22: label=Daniel Campbell, Seller
e23: label=Sarah Thompson, Buyer
e25: label=Olivia Kim, Seller
e26: label=Ava Stewart, Buyer
e30: label=Emma Chen, Buyer
e31: label=Isabella Bennett, Prospect
e32: label=Mia Murphy, Prospect
e35: label=Andrew Collins, Prospect
e36: label=David Nguyen, Buyer
e37: label=Charlotte Clark, Prospect
e38: label=James Patel, Buyer
e39: label=Michael Rodriguez, Seller
e42: label=Ryan Rivera, Prospect

--- Clusters ---
e44: label=397 Spruce Way, Guelph, +1 more
e45: label=276 Cedar Drive, Milton, +1 more
e46: label=422 Willow Boulevard, Cambridge, +1 more
e47: label=52 Ash Terrace, Brampton, +1 more
e48: label=Daniel Campbell, +1 more
e49: label=Emma Chen, +3 more
e50: label=Andrew Collins, +3 more
e51: label=Sophia Morrison, +1 more
e52: label=Daniel Campbell, +2 more
e53: label=381 Maple Street, Oakville, +2 more
e54: label=Daniel Campbell, +2 more

--- Map Features ---
e59-e92: City labels (Brampton, Mississauga, Milton, Burlington, Hamilton, etc.)</pre>
        </div>
    </details>

    <h2>üìù Notes</h2>
    <ul style="color: #8b949e;">
        <li><strong>Branch merged:</strong> <code>ship/critical</code> ‚Üí <code>main</code> (84 commits, 80 files, +13,487/-1,066 lines)</li>
        <li><strong>Demo data:</strong> 12 listings, 15 contacts, 10 tasks all loaded correctly in demo mode</li>
        <li><strong>Map clustering:</strong> Working correctly with MKMapView UIViewRepresentable (Apple-blessed approach)</li>
        <li><strong>Glass material:</strong> Menu half-sheet uses iOS 26 liquid glass styling</li>
        <li><strong>Automation limitation:</strong> ATL's XCTest-based native server is unstable ‚Äî crashes after 1-2 interactions. For deeper QA, recommend manual testing or XCUITest suite.</li>
    </ul>

    <script>
        function openLightbox(img) {
            document.getElementById('lightbox-img').src = img.src;
            document.getElementById('lightbox').classList.add('active');
        }
        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
        }
        document.addEventListener('keydown', e => { if (e.key === 'Escape') closeLightbox(); });
    </script>
</body>
</html>